[
    #(load "forms_test" "io")

    (io/put "=== Form Composition Test ===\n")

    (io/put "\n--- Testing nested form structure ---\n")
    (def inner_pair (forms_test/make_pair 42 99))
    (io/put "Created inner pair: {42 99}\n")

    (def nested_form {inner_pair "metadata"})
    (io/put "Created nested form with pair and string\n")

    (def nested_casted (cast :nested nested_form))
    (io/put "Cast nested form to :nested successfully\n")

    (io/put "\n--- Testing form within result ---\n")
    (def data_pair (forms_test/make_pair 100 200))
    (io/put "Created data pair: {100 200}\n")

    (def result_with_form (forms_test/make_result "contains pair" 123 @nil))
    (io/put "Created result form\n")

    (io/put "\n--- Testing multiple pairs in composition ---\n")
    (def p1 (forms_test/make_pair 1 2))
    (def p2 (forms_test/make_pair 3 4))
    (io/put "Created two pairs\n")

    (def composite {p1 p2})
    (io/put "Created composite structure with two pairs\n")

    (io/put "\n--- Testing point form composition ---\n")
    (def origin (forms_test/make_point 0.0 0.0))
    (def pt_a (forms_test/make_point 3.0 4.0))
    (def pt_b (forms_test/make_point 6.0 8.0))
    (io/put "Created three points\n")

    (def dist_a (forms_test/distance origin pt_a))
    (def dist_b (forms_test/distance origin pt_b))
    (io/put "Distance from origin to pt_a: %f\n" dist_a)
    (io/put "Distance from origin to pt_b: %f\n" dist_b)

    (io/put "\n=== All form composition tests passed ===\n")
]

