[
  (def value 42)
  (def casted_int (cast :int value))
  (debug "test 1 - cast int to int:" casted_int)

  (def str_value "hello")
  (def casted_str (cast :str str_value))
  (debug "test 2 - cast string to string:" casted_str)

  (def real_value 3.14)
  (def casted_real (cast :real real_value))
  (debug "test 3 - cast real to real:" casted_real)

  (def symbol_value test-symbol)
  (def casted_symbol (cast :symbol symbol_value))
  (debug "test 4 - cast symbol to symbol:" casted_symbol)

  (def real_to_int (cast :int 3.14))
  (debug "test 5 - cast real to int (conversion):" real_to_int)

  (def int_to_real (cast :real 42))
  (debug "test 6 - cast int to real (conversion):" int_to_real)

  (def result1 (recover [
    (def wrong_cast (cast :int "not an int"))
    (debug "this should not print")
    999
  ] [
    (debug "test 7 - caught type mismatch:" $exception)
    123
  ]))
  (debug "test 7 - recover caught cast error, result:" result1)

  (def result2 (recover [
    (def another_wrong (cast :str 42))
    (debug "this should not print")
    888
  ] [
    (debug "test 8 - caught another type mismatch:" $exception)
    456
  ]))
  (debug "test 8 - recover caught another cast error, result:" result2)

  (def any_fn (fn (x :int) :any [
    x
  ]))
  
  (def any_result (any_fn 100))
  (def typed_result (cast :int any_result))
  (debug "test 9 - cast any to int:" typed_result)

  (def brace_list {1 2 3})
  (def to_bracket (cast :list-b brace_list))
  (debug "test 10 - cast brace list to bracket list:" to_bracket)

  (def str_val "hello world")
  (def str_to_paren (cast :list-p str_val))
  (debug "test 11 - cast string to paren list:" str_to_paren)

  (def int_list {65 66 67})
  (def bytes_to_str (cast :str int_list))
  (debug "test 12 - cast int list to string (ASCII):" bytes_to_str)

  (def big_int_list {300 256 65})
  (def modulo_str (cast :str big_int_list))
  (debug "test 13 - cast with modulo 256:" modulo_str)

  (def str_with_bytes "ABC")
  (def bytes_list (cast :list-c str_with_bytes))
  (debug "test 14 - cast string to byte list:" bytes_list)

  (def roundtrip_ints {72 101 108 108 111})
  (def to_string (cast :str roundtrip_ints))
  (def back_to_ints (cast :list-b to_string))
  (debug "test 15 - roundtrip int->str->int:" back_to_ints)

  (def quoted_list '(65 66 67))
  (def from_quoted (cast :str quoted_list))
  (debug "test 16 - cast quoted list (SOME unwrap):" from_quoted)
]

