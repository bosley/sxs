[
    #(load "forge" "io")

    (io/put "=== Forge Drop Period Test ===\n")

    (io/put "\n--- Drop every 2nd element starting at 0 ---\n")
    (def x0 '(0 1 2 3 4 5 6 7 8 9))
    (def x1 (forge/drop_period x0 0 2))
    (assert (eq (forge/count x1) 5) "Drop period 2 from offset 0 should leave 5 elements")
    (def x1_list (cast :list-p x1))
    (assert (eq (at 0 x1_list) 1) "First element should be 1")
    (assert (eq (at 1 x1_list) 3) "Second element should be 3")
    (assert (eq (at 2 x1_list) 5) "Third element should be 5")
    (assert (eq (at 3 x1_list) 7) "Fourth element should be 7")
    (assert (eq (at 4 x1_list) 9) "Fifth element should be 9")
    (io/put "Drop period 2 from offset 0\n")

    (io/put "\n--- Drop every 3rd element starting at 1 ---\n")
    (def y0 '(0 1 2 3 4 5 6 7 8 9))
    (def y1 (forge/drop_period y0 1 3))
    (assert (eq (forge/count y1) 7) "Drop period 3 from offset 1 should leave 7 elements")
    (def y1_list (cast :list-p y1))
    (assert (eq (at 0 y1_list) 0) "First element should be 0")
    (assert (eq (at 1 y1_list) 2) "Second element should be 2")
    (assert (eq (at 2 y1_list) 3) "Third element should be 3")
    (io/put "Drop period 3 from offset 1\n")

    (io/put "\n--- Drop with period 1 (all from offset) ---\n")
    (def z0 '(1 2 3 4 5))
    (def z1 (forge/drop_period z0 2 1))
    (assert (eq (forge/count z1) 2) "Drop period 1 from offset 2 should leave 2 elements")
    (def z1_list (cast :list-p z1))
    (assert (eq (at 0 z1_list) 1) "First element should be 1")
    (assert (eq (at 1 z1_list) 2) "Second element should be 2")
    (io/put "Drop period 1 from offset 2 - removes all from offset onwards\n")

    (io/put "\n--- Drop with offset beyond list ---\n")
    (def w0 '(1 2 3))
    (def w1 (forge/drop_period w0 10 2))
    (assert (eq (forge/count w1) 3) "Drop with offset beyond should not change size")
    (def w1_list (cast :list-p w1))
    (assert (eq (at 0 w1_list) 1) "First element should be 1")
    (assert (eq (at 1 w1_list) 2) "Second element should be 2")
    (assert (eq (at 2 w1_list) 3) "Third element should be 3")
    (io/put "Drop with offset beyond list - no change\n")

    (io/put "\n=== All drop_period tests complete ===\n")
]
