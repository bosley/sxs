[
    (def level1 100)
    
    (debug "Level 1:" level1)
    
    [
        (def level2 200)
        (debug "Level 2:" level1 level2)
        
        [
            (def level3 300)
            (debug "Level 3:" level1 level2 level3)
            
            [
                (def level4 400)
                (debug "Level 4:" level1 level2 level3 level4)
            ]
            
            (debug "Back to level 3:" level1 level2 level3)
        ]
        
        (debug "Back to level 2:" level1 level2)
    ]
    
    (debug "Back to level 1:" level1)
    
    (def outer-fn (fn (x :int) :int [
        (debug "Outer function:" x)
        
        (def inner-fn (fn (y :int) :int [
            (debug "Inner function:" x y)
            (def result 42)
        ]))
        
        (inner-fn 20)
        
        (def ret 1)
    ]))
    
    (debug "Calling nested function test")
    (outer-fn 10)
]

