[
    #(load "forge" "io")

    (io/put "=== Forge Push/Pop Test ===\n")

    (io/put "\n--- Push Front ---\n")
    (def x0 '(2 3 4))
    (def x1 (forge/pf x0 1))
    (assert (eq (forge/count x1) 4) "Push front should increase size to 4")
    (def x1_list (cast :list-p x1))
    (assert (eq (at 0 x1_list) 1) "First should be 1")
    (assert (eq (at 3 x1_list) 4) "Last should be 4")
    (io/put "Push front 1 to (2 3 4)\n")

    (io/put "\n--- Push Back ---\n")
    (def y0 '(1 2 3))
    (def y1 (forge/pb y0 4))
    (assert (eq (forge/count y1) 4) "Push back should increase size to 4")
    (assert (eq y1 '(1 2 3 4)) "Result should be (1 2 3 4)")
    (io/put "Push back 4 to (1 2 3)\n")

    (io/put "\n--- Remove Front ---\n")
    (def z0 '(1 2 3 4))
    (def z1 (forge/rf z0))
    (assert (eq (forge/count z1) 3) "Remove front should decrease size to 3")
    (assert (eq z1 '(2 3 4)) "Result should be (2 3 4)")
    (io/put "Remove front from (1 2 3 4)\n")

    (io/put "\n--- Remove Back ---\n")
    (def w0 '(1 2 3 4))
    (def w1 (forge/rb w0))
    (assert (eq (forge/count w1) 3) "Remove back should decrease size to 3")
    (assert (eq w1 '(1 2 3)) "Result should be (1 2 3)")
    (io/put "Remove back from (1 2 3 4)\n")

    (io/put "\n--- Remove from empty ---\n")
    (def e0 '())
    (def e1 (forge/rf e0))
    (def e2 (forge/rb e0))
    (assert (eq (forge/count e1) 0) "Remove front from empty should be empty")
    (assert (eq (forge/count e2) 0) "Remove back from empty should be empty")
    (io/put "Remove front from empty list\n")
    (io/put "Remove back from empty list\n")

    (io/put "\n=== All push/pop tests complete ===\n")
]
