[
    #(load "kv" "io")

    (io/put "=== MIXED Type Round-Trip Test ===\n")
    (kv/open-memory store)

    (io/put "\n--- Mixed List with All Basic Types ---\n")
    (kv/set store:basic '(42 3.14 "hello" symbol))
    (def retrieved_basic (kv/get store:basic))
    (io/put "Mixed basic types stored and retrieved\n")

    (io/put "\n--- Mixed List with Operators ---\n")
    (kv/set store:operators '('42 #100 @("error") ?200))
    (def retrieved_operators (kv/get store:operators))
    (io/put "Mixed with operators stored and retrieved\n")

    (io/put "\n--- Deeply Nested Mixed Structure ---\n")
    (kv/set store:deep '((integers (1 2 3)) (reals (1.1 2.2)) (strings ("a" "b")) (symbols (x y z))))
    (def retrieved_deep (kv/get store:deep))
    (io/put "Deeply nested mixed structure stored and retrieved\n")

    (io/put "\n--- Mixed with Different List Types ---\n")
    (kv/set store:lists '((paren 1 2) [bracket 3 4] {brace 5 6}))
    (def retrieved_lists (kv/get store:lists))
    (io/put "Mixed list types stored and retrieved\n")

    (io/put "\n--- Complex Real-World Structure ---\n")
    (kv/set store:user '((id 12345) (name "bosley") (email "bosley@insula.dev") (age 42) (active true) (roles (admin user)) (metadata #((created 1609459200) (updated 1640995200)))))
    (def retrieved_user (kv/get store:user))
    (io/put "Complex user structure stored and retrieved\n")

    (io/put "\n--- Nested Operators and Lists ---\n")
    (kv/set store:nested_ops '(@((error 404) (message "not found")) #((type "metadata") (version 1)) '((data quoted))))
    (def retrieved_nested_ops (kv/get store:nested_ops))
    (io/put "Nested operators with lists stored and retrieved\n")

    (io/put "\n--- Mixed with Empty Collections ---\n")
    (kv/set store:empty_mix '(() [] {} "" 0))
    (def retrieved_empty_mix (kv/get store:empty_mix))
    (io/put "Mixed with empty collections stored and retrieved\n")

    (io/put "\n--- Large Mixed Structure ---\n")
    (kv/set store:large '((section1 ((a 1) (b 2) (c 3))) (section2 ((x "one") (y "two") (z "three"))) (section3 ((p 1.1) (q 2.2) (r 3.3))) (section4 (@("err1") @("err2"))) (section5 (#data1 #data2 #data3))))
    (def retrieved_large (kv/get store:large))
    (io/put "Large mixed structure stored and retrieved\n")

    (io/put "\n=== All mixed type tests complete ===\n")
]

