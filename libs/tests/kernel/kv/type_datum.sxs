[
    #(load "kv" "io")

    (io/put "=== DATUM Type Round-Trip Test ===\n")
    (kv/open-memory store)

    (io/put "\n--- Simple Datum ---\n")
    (kv/set store:dat1 #42)
    (kv/set store:dat2 #"data string")
    (kv/set store:dat3 #symbol)
    
    (def retrieved1 (kv/get store:dat1))
    (def retrieved2 (kv/get store:dat2))
    (def retrieved3 (kv/get store:dat3))
    
    (io/put "Datum integer stored and retrieved\n")
    (io/put "Datum string stored and retrieved\n")
    (io/put "Datum symbol stored and retrieved\n")

    (io/put "\n--- Nested Datum ---\n")
    (kv/set store:double ##42)
    (kv/set store:triple ###100)
    
    (def retrieved_double (kv/get store:double))
    (def retrieved_triple (kv/get store:triple))
    
    (io/put "Double-datum value stored and retrieved\n")
    (io/put "Triple-datum value stored and retrieved\n")

    (io/put "\n--- Datum with Lists ---\n")
    (kv/set store:dlist #(1 2 3))
    (kv/set store:dnested #(1 (2 3) 4))
    
    (def retrieved_dlist (kv/get store:dlist))
    (def retrieved_dnested (kv/get store:dnested))
    
    (io/put "Datum list stored and retrieved\n")
    (io/put "Datum nested list stored and retrieved\n")

    (io/put "\n--- Datum in Lists ---\n")
    (kv/set store:list '(#1 #2 #3))
    (def retrieved_list (kv/get store:list))
    (io/put "List of datum values stored and retrieved\n")

    (io/put "\n--- Complex Datum Structure ---\n")
    (kv/set store:complex #((type "metadata") (version 1) (data (a b c))))
    (def retrieved_complex (kv/get store:complex))
    (io/put "Complex datum structure stored and retrieved\n")

    (io/put "\n=== All datum tests complete ===\n")
]

